<!DOCTYPE html>
<html>
    <head>
        <meta charset='UTF-8'>
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="{{ url_for('static', filename= 'css/styles.css') }}">
        <title>Options Research Chain</title>
    </head>
    <body>
        <div id="navbar">
            <div id="container">
                <div id="container-logo">
                    <a href='#'><p>Presidio</p></a>
                </div>
                <ul>
                    <li><a href="#product">SEARCH</a></li>
                    <li><a href="#footer">CONTACT</a></li>
                </ul>
            </div>
        </div>
        <div id="landing-page">
            <h1>Searching For Options Data Has Never Been Easier Before</h1>
            <footer id="landing-footer">Get access to unlimited options data with one click of a button, all at no cost</footer>
            <div id="title-div-1">
                <footer>Live</footer>
                <footer>-</footer>
                <footer>Downloadable</footer>
                <footer>-</footer>
                <footer>Greeks</footer>
                <footer>-</footer>
                <footer>Bid/Ask Sizes</footer>
                <footer>-</footer>
                <footer>Volume</footer>
            </div>   
            <div id="main-buttons">
                <a href="#product"><button type="button" name="try presidio search" id="coex-search">> TRY PRESIDIO SEARCH</button></a>
                <a href="#product-discloser"><button type="button" name="why use coex" id="why-coex">> WHY USE PRESIDIO?</button></a>
            </div>
        </div>

        <div id="product-discloser">
            <div id="product-discloser-p">
                <p>Investment companies want consumers (you) to pay them for options data. <br>It should not be this way...</p>
                <div id="product-discloser-price">
                    <p id="description">Presidio is capable of collecting options chain and greeks data from official sources, packaging this 
                        data into one, downloadable CSV. Start a search by entering a stock/ETF symbol and the expiration date. 
                        Next, distract yourself with something for 2-5 minutes and come back to see a full, complete, and downloadable options chain and Greeks. All at no cost.</p>
                    <div id="product-example">
                        <p id="title-box">Presidio</p>
                        <div id="box-pdp">
                            <p class="title-showcase-product">Input</p>
                            <p id="showcase-product">Call options for AAPL, at February 23, 2024</p>
                            <hr>
                            <p class="title-showcase-product" id="output">Output</p>
                            <table id="table-showcase-product">
                                <tr>
                                    <th>Symbol</th>
                                    <th>Contract Name</th>
                                    <th>Bid</th>
                                    <th>Ask</th>
                                    <th>Mid</th>
                                    <th>Premium</th>
                                    <th>Change</th>
                                    <th>Volume</th>
                                    <th>Open Interest</th>
                                    <th>Implied Volatility</th>
                                    <th>Expiry Date</th>
                                    <th>Strike</th>
                                    <th>Added Time</th>
                                </tr>
                                <tr>
                                    <td>AAPL</td>
                                    <td>AAPL240223C00095000</td>
                                    <td>86.60</td>
                                    <td>88.60</td>
                                    <td>87.6</td>
                                    <td>89.24</td>
                                    <td>-0.11</td>
                                    <td>4</td>
                                    <td>12</td> 
                                    <td>507.81%</td>
                                    <td>2024-02-23</td>
                                    <td>95</td>
                                    <td><i>(today's date)</i></td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <h2 id="product-title">Presidio</h2>

        <!-- Product -->
        <div id="product">
            <h2>Presidio grapples complete and downloadable options data from low-latency sources</h2>
            <div>
                <p id="terminal">Terminal</p>
                <div id="product-feature">
                    <p>Try a search:</p>
                    <form action="/options_form" method="post">

                        <div id="stock-symbol-search">
                            <div id="stock-input">
                                <p>Lookup the expiration dates for a stock/ETF:</p>
                                <input type="text" name="user_input_ticker" placeholder="Ex: AAPL" id="stock-symbol">
                                <button type="submit" name="search_expiry_dates">Lookup Expiration Dates</button>
                            </div>
                            <div id="separation"></div>
                            <div id="date-of-expiry-list-div">
                                <p id="notice-exp-date">Expiration dates will appear down here:</p>
                                <div id="exp_date_list">
                                    <p>{{ no_exp_date_list }}</p>
                                    <p>{{ ticker_notice }}</p>
                                    {% for date in exp_date_list %}
                                        <p>{{ date }}</p>
                                    {% endfor %}
                                </div>
                            </div>
                        </div>
                        <div id="separation-two"></div>
                        <p>Enter the stock/ETF symbol:</p>
                        <input type="text" name="user_input_ticker_main" placeholder="Ex: AAPL">
                        <p id="optional">Enter the expiry date of the option (optional):</p>
                        <p>Note: The program will run 120x faster if an expiration date is specified</p>
                        <div id="date-of-expiry">
                            <div>
                                <p>Month</p>
                                <input type="text" name="user_input_month" id="special-date-month" placeholder="Ex: February">
                            </div>
                            <div>
                                <p>Day</p>
                                <input type="text" name="user_input_day" placeholder="Ex: 6">
                            </div>
                            <div>
                                <p>Year</p>
                                <input type="text" name="user_input_year" placeholder="Ex: 2024">
                            </div>
                        </div>
                        <div id="button-choices">
                            <div>
                                <button type="submit" name="search_call" class="submit" onclick='move()'>Search Call Options</button>
                                <button type="submit" name="search_put" class="submit" id="put-button" onclick='move()' onclick="move2()" onclick="move3()">Search Put Options</button>
                                <button type="submit" name="search_all" class="submit" id="special-button" onclick='move()' onclick="move2()" onclick="move3()">Search Call & Put Options*</button>
                            </div>
                            <p>*Fetches the full, complete dataset from both call and put options</p>
                        </div>
                        <!-- Soon, give the user three options: Search for call, or put, or both -->
                        <div id="separation-three"></div>
                    </form>

                    <p>The Thinking Bar... (if you are lucky, it may finish faster)</p>

                    <div id="myProgress">
                        <div id="myBar"></div>
                    </div>

                    <script>
                        var i = 0;
                        function move() {
                          if (i == 0) {
                            i = 1;
                            var elem = document.getElementById("myBar");
                            var width = 1;
                            var id = setInterval(frame, 1700);
                            function frame() {
                              if (width >= 100) {
                                clearInterval(id);
                                i = 0;
                              } else {
                                width++;
                                elem.style.width = width + "%";
                              }
                            }
                          }
                        }
                    </script>

                    <p>{{ notice }}</p>

                    <div class="tab">
                        <button class="tablinks" onclick="openChain(event, 'calls')">Calls</button>
                        <button class="tablinks" onclick="openChain(event, 'puts')">Puts</button>
                        <button class="tablinks" onclick="openChain(event, 'calls_and_puts')">Calls & Puts</button>
                        <button class="tablinks" id="tablinks-greeks" onclick="openChain(event, 'call_greeks')">Call Greeks</button>
                        <button class="tablinks" id="tablinks-greeks" onclick="openChain(event, 'put_greeks')">Put Greeks</button>
                    </div>

                    <div id="calls" class="tabcontent">
                        <p class="options-title">{{ option_chain_title_call }}</p>
                        <span onclick="this.parentElement.style.display='none'" class="topright">&times</span>

                        <div class="download-button-div">
                            <button onclick="exportToCSV('calls')" class="downloadcsv">Download CSV</button>
                            <p>By Presidio, built in Downtown San Francisco, California</p>
                        </div>

                        <div id="table-box">
                            <table>
                                <tr>
                                    <th>Symbol</th>
                                    <th>Contract Name</th>
                                    <th>Bid</th>
                                    <th>Ask</th>
                                    <th>Mid</th>
                                    <th>Premium</th>
                                    <th>Change</th>
                                    <th>Volume</th>
                                    <th>Open Interest</th>
                                    <th>Implied Volatility</th>
                                    <th>Expiry Date</th>
                                    <th>Strike</th>
                                    <th>Added Time</th>
                                </tr>
                                {% for table in call_table %}
                                    <tr>
                                        <td>{{ table['symbol'] }}</td>
                                        <td>{{ table['contract_name'] }}</td>
                                        <td>{{ table['bid'] }}</td>
                                        <td>{{ table['ask'] }}</td>
                                        <td>{{ table['mid'] }}</td>
                                        <td>{{ table['premium'] }}</td>
                                        <td>{{ table['change'] }}</td>
                                        <td>{{ table['volume'] }}</td>
                                        <td>{{ table['open_interest'] }}</td> 
                                        <td>{{ table['implied_volatility'] }}</td>
                                        <td>{{ table['expiry_date'] }}</td>
                                        <td>{{ table['strike'] }}</td>
                                        <td>{{ table['added_time'] }}</td>
                                    </tr>
                                {% endfor %}
                            </table>
                        </div>
                    </div>

                    <div id="puts" class="tabcontent">
                        <p class="options-title">{{ option_chain_title_put }}</p>
                        <span onclick="this.parentElement.style.display='none'" class="topright">&times</span>

                        <div class="download-button-div">
                            <button onclick="exportToCSV('puts')" class="downloadcsv">Download CSV</button>
                            <p>By Presidio, built in Downtown San Francisco, California</p>
                        </div>

                        <div id="table-box">
                            <table>
                                <tr>
                                    <th>Symbol</th>
                                    <th>Contract Name</th>
                                    <th>Bid</th>
                                    <th>Ask</th>
                                    <th>Mid</th>
                                    <th>Premium</th>
                                    <th>Change</th>
                                    <th>Volume</th>
                                    <th>Open Interest</th>
                                    <th>Implied Volatility</th>
                                    <th>Expiry Date</th>
                                    <th>Strike</th>
                                    <th>Added Time</th>
                                </tr>
                                {% for table in put_table %}
                                    <tr>
                                        <td>{{ table['symbol'] }}</td>
                                        <td>{{ table['contract_name'] }}</td>
                                        <td>{{ table['bid'] }}</td>
                                        <td>{{ table['ask'] }}</td>
                                        <td>{{ table['mid'] }}</td>
                                        <td>{{ table['premium'] }}</td>
                                        <td>{{ table['change'] }}</td>
                                        <td>{{ table['volume'] }}</td>
                                        <td>{{ table['open_interest'] }}</td> 
                                        <td>{{ table['implied_volatility'] }}</td>
                                        <td>{{ table['expiry_date'] }}</td>
                                        <td>{{ table['strike'] }}</td>
                                        <td>{{ table['added_time'] }}</td>
                                    </tr>
                                {% endfor %}
                            </table>
                        </div>
                    </div>

                    <div id="calls_and_puts" class="tabcontent">
                        <p class="options-title">{{ option_chain_title_all }}</p>
                        <span onclick="this.parentElement.style.display='none'" class="topright">&times</span>

                        <div class="download-button-div">
                            <button onclick="exportToCSV('calls_and_puts')" class="downloadcsv">Download CSV</button>
                            <p>By Presidio, built in Downtown San Francisco, California</p>
                        </div>

                        <div id="table-box">
                            <table>
                                <tr>
                                    <th>Expiry Date - Call</th>
                                    <th>Symbol - Call</th>
                                    <th>Contract Name - Call</th>
                                    <th>Change - Call</th>
                                    <th>Volume - Call</th>
                                    <th>Open Interest - Call</th>
                                    <th>Implied Volatility - Call</th>
                                    <th>Premium - Call</th>
                                    <th>Mid - Call</th>
                                    <th>Ask - Call</th>
                                    <th>Bid - Call</th>

                                    <th>Strike</th>

                                    <th>Bid - Put</th>
                                    <th>Ask - Put</th>
                                    <th>Mid - Put</th>
                                    <th>Premium - Put</th>
                                    <th>Implied Volatility - Put</th>
                                    <th>Open Interest - Put</th>
                                    <th>Volume - Put</th>
                                    <th>Change - Put</th>
                                    <th>Contract Name - Put</th>
                                    <th>Symbol - Put</th>
                                    <th>Expiry Dates - Put</th>
                                </tr>           
                                {% for table in call_and_put_table %}
                                    <tr>
                                        <td>{{ table['expiry_date_call'] }}</td>
                                        <td>{{ table['symbol_call'] }}</td>
                                        <td>{{ table['contract_name_call'] }}</td>
                                        <td>{{ table['change_call'] }}</td>
                                        <td>{{ table['volume_call'] }}</td>
                                        <td>{{ table['open_interest_call'] }}</td>
                                        <td>{{ table['implied_volatility_call'] }}</td>
                                        <td>{{ table['premium_call'] }}</td>
                                        <td>{{ table['mid_call'] }}</td>
                                        <td>{{ table['ask_call'] }}</td>
                                        <td>{{ table['bid_call'] }}</td>

                                        <td>{{ table['strike_call'] }}</td>

                                        <td>{{ table['bid_put'] }}</td>
                                        <td>{{ table['ask_put'] }}</td>
                                        <td>{{ table['mid_put'] }}</td>
                                        <td>{{ table['premium_put'] }}</td>
                                        <td>{{ table['implied_volatility_put'] }}</td>
                                        <td>{{ table['open_interest_put'] }}</td>
                                        <td>{{ table['volume_put'] }}</td>
                                        <td>{{ table['change_put'] }}</td>
                                        <td>{{ table['contract_name_put'] }}</td>
                                        <td>{{ table['symbol_put'] }}</td>
                                        <td>{{ table['expiry_date_put'] }}</td>
                                    </tr>
                                {% endfor %}
                            </table>
                        </div>
                    </div>

                    <div id="call_greeks" class="tabcontent">
                        <p class="options-title">{{ option_greeks_title_call }}</p>
                        <span onclick="this.parentElement.style.display='none'" class="topright">&times</span>

                        <div class="download-button-div">
                            <button onclick="exportToCSV('call_greeks')" class="downloadcsv">Download CSV</button>
                            <p>By Presidio, built in Downtown San Francisco, California</p>
                        </div>

                        <div id="table-box">
                            <table>
                                <tr>
                                  <th>Contract Name</th>
                                  <th>Delta</th>
                                  <th>Gamma</th>
                                  <th>Theta</th>
                                  <th>Vega</th> 
                                  <th>Rho</th>
                                  <th>Day High</th>
                                  <th>Day Low</th>
                                  <th>Previous Close</th>
                                  <th>Open</th>
                                  <th>Tick</th>
                                  <th>Bid Size</th>
                                  <th>Ask Size</th>
                                  <th>Contract High</th>
                                  <th>Contract Low</th>
                                  <th>Market</th>
                                  <th>Days Until Expiration</th>
                                  <th>Volume</th>
                                  <th>Open Interest</th>
                                  <th>Implied Volatility</th>  
                                </tr>
                                {% for table in call_greeks_table %}
                                    <tr>
                                      <td>{{ table['contract_name'] }}</td>
                                      <td>{{ table['delta'] }}</td>
                                      <td>{{ table['gamma'] }}</td>
                                      <td>{{ table['theta'] }}</td>
                                      <td>{{ table['vega'] }}</td>
                                      <td>{{ table['rho'] }}</td>
                                      <td>{{ table['day_high'] }}</td>
                                      <td>{{ table['day_low'] }}</td>
                                      <td>{{ table['previous_close'] }}</td> 
                                      <td>{{ table['open'] }}</td>
                                      <td>{{ table['tick'] }}</td>
                                      <td>{{ table['bid_size'] }}</td>
                                      <td>{{ table['ask_size'] }}</td>
                                      <td>{{ table['contract_high'] }}</td>
                                      <td>{{ table['contract_low'] }}</td>
                                      <td>{{ table['market'] }}</td>
                                      <td>{{ table['days_until_expiration'] }}</td>
                                      <td>{{ table['volume'] }}</td>
                                      <td>{{ table['open_interest'] }}</td>
                                      <td>{{ table['implied_volatility'] }}</td>
                                    </tr>
                                {% endfor %}
                              </table>
                        </div>
                    </div>

                    <div id="put_greeks" class="tabcontent">
                        <p class="options-title">{{ option_greeks_title_put }}</p>
                        <span onclick="this.parentElement.style.display='none'" class="topright">&times</span>

                        <div class="download-button-div">
                            <button onclick="exportToCSV('put_greeks')" class="downloadcsv">Download CSV</button>
                            <p>By Presidio, built in Downtown San Francisco, California</p>
                        </div>

                        <div id="table-box">
                            <table>
                                <tr>
                                  <th>Contract Name</th>
                                  <th>Delta</th>
                                  <th>Gamma</th>
                                  <th>Theta</th>
                                  <th>Vega</th> 
                                  <th>Rho</th>
                                  <th>Day High</th>
                                  <th>Day Low</th>
                                  <th>Previous Close</th>
                                  <th>Open</th>
                                  <th>Tick</th>
                                  <th>Bid Size</th>
                                  <th>Ask Size</th>
                                  <th>Contract High</th>
                                  <th>Contract Low</th>
                                  <th>Market</th>
                                  <th>Days Until Expiration</th>
                                  <th>Volume</th>
                                  <th>Open Interest</th>
                                  <th>Implied Volatility</th>  
                                </tr>
                                {% for table in put_greeks_table %}
                                    <tr>
                                      <td>{{ table['contract_name'] }}</td>
                                      <td>{{ table['delta'] }}</td>
                                      <td>{{ table['gamma'] }}</td>
                                      <td>{{ table['theta'] }}</td>
                                      <td>{{ table['vega'] }}</td>
                                      <td>{{ table['rho'] }}</td>
                                      <td>{{ table['day_high'] }}</td>
                                      <td>{{ table['day_low'] }}</td>
                                      <td>{{ table['previous_close'] }}</td> 
                                      <td>{{ table['open'] }}</td>
                                      <td>{{ table['tick'] }}</td>
                                      <td>{{ table['bid_size'] }}</td>
                                      <td>{{ table['ask_size'] }}</td>
                                      <td>{{ table['contract_high'] }}</td>
                                      <td>{{ table['contract_low'] }}</td>
                                      <td>{{ table['market'] }}</td>
                                      <td>{{ table['days_until_expiration'] }}</td>
                                      <td>{{ table['volume'] }}</td>
                                      <td>{{ table['open_interest'] }}</td>
                                      <td>{{ table['implied_volatility'] }}</td>
                                    </tr>
                                {% endfor %}
                              </table>
                        </div>
                    </div>

                    <script>
                        function openChain(evt, buyName) {
                            // Declare all variables
                            var i, tabcontent, tablinks;
                        
                            // Get all elements with class="tabcontent" and hide them
                            tabcontent = document.getElementsByClassName("tabcontent");
                            for (i = 0; i < tabcontent.length; i++) {
                              tabcontent[i].style.display = "none";
                            }
                        
                            // Get all elements with class="tablinks" and remove the class "active"
                            tablinks = document.getElementsByClassName("tablinks");
                            for (i = 0; i < tablinks.length; i++) {
                              tablinks[i].className = tablinks[i].className.replace(" active", "");
                            }
                        
                            // Show the current tab, and add an "active" class to the button that opened the tab
                            document.getElementById(buyName).style.display = "block";
                            evt.currentTarget.className += " active";
                          }
                    </script>

                    <script>
                        function exportToCSV(tableId) {
                            const csvRows = [];
                            const headers = [];
                            const table = document.getElementById(tableId);
                            const rows = table.querySelectorAll('tr');
                        
                            // Get table headers
                            const headerCols = rows[0].querySelectorAll('th');
                            headerCols.forEach(col => {
                                headers.push(col.innerText);
                            });
                            csvRows.push(headers.join(','));
                        
                            // Add table data
                            for (let i = 1; i < rows.length; i++) {
                                const row = [];
                                const cols = rows[i].querySelectorAll('td');
                                cols.forEach(col => {
                                    row.push(col.innerText);
                                });
                                csvRows.push(row.join(','));
                            }
                        
                            // Create and download CSV file
                            const csvContent = csvRows.join('\n');
                            const blob = new Blob([csvContent], { type: 'text/csv' });
                            const url = window.URL.createObjectURL(blob);
                            const a = document.createElement('a');
                            a.href = url;
                            a.download = 'call_options_chain.csv';
                            a.click();
                            window.URL.revokeObjectURL(url);
                        }
                    </script>
                </div>
            </div>
        </div>

        <div id="credits">
            <p>Powered by*:</p>
            <img src="https://upload.wikimedia.org/wikipedia/commons/8/8f/Yahoo%21_Finance_logo_2021.png" alt="yahoo_finance">
            <p id="note-credits">*Some options information in this software cannot be discovered by simply going into Yahoo Finance's website; however, if discovered, the information is not downloadable. Presidio addresses this problem by making this information downloadable, saving users time from web scraping.</p>
        </div>
        <div id="options-foreword">
            <h2>Presidio</h2>
            <p>Built by Brian Huynh while sitting in a Philz Coffee in Downtown San Francisco, California<br>
                Built with a desire to solve a problem for the less financially-advantaged people, who still wish to trade stocks/ETFs<br>
                Built with a desire to one day start a tech company, to change the world<br>
                Built with an inspiration coming from OpenAI, Anthropic, Perplexity AI, and Google</p>
        </div>

        <div id="footer">
            <p id="title-footer">Presidio</p>
            <div>
                <p>Contact</p>
                <a href="www.linkedin.com/in/brian-huynh-139ba4298">LinkedIn</a>
            </div>
            <div id="copy-linkedin-link">
                <button id='copyButton' onclick="copyText()">Copy the Link to My LinkedIn Profile</button>
                <p id="copyText">www.linkedin.com/in/brian-huynh-139ba4298</p>

                <script>
                    function copyText() {
                      var copyText = document.getElementById("copyText");
                      var copyButton = document.getElementById("copyButton");
                                        
                      // Create a temporary input element
                      var tempInput = document.createElement("textarea");
                      tempInput.value = copyText.innerText;
                      document.body.appendChild(tempInput);
                      tempInput.select();
                      document.execCommand("copy");
                      document.body.removeChild(tempInput);
                                        
                      // Change button text
                      copyButton.innerText = "✓ Copied!";
                                        
                      setTimeout(function() {
                        copyButton.innerText = "Copy the Link to My LinkedIn Profile";
                      }, 1000);
                    }
                </script>
            </div>
        </div>

    </body>
</html>